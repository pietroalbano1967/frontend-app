<div class="card">
    <h2>Storico Previsioni</h2>
    <form (ngSubmit)="load()" class="form">
        <label>
            Ticker
            <select [(ngModel)]="ticker" name="ticker">
                @for (t of tickers; track t) {
                <option [value]="t">{{ t }}</option>
                }
            </select>
        </label>
        <label>
            Limite
            <input type="number" [(ngModel)]="limit" name="limit" />
        </label>
        <button type="submit">Carica</button>
    </form>
</div>

@if (rows.length) {
<div class="card chart">
    <div class="chart-container">
        <canvas baseChart [data]="lineChartData" [options]="lineChartOptions" [type]="'line'">
        </canvas>
    </div>
</div>
}

@if (rows.length) {
<div class="card">
    <h3>Tabella</h3>
    <table>
        <thead>
            <tr>
                <th>TS</th>
                <th>yhat</th>
                <th>Model</th>
                <th>Creato</th>
            </tr>
        </thead>
        <tbody>
            @for (r of rows; track r) {
            <tr>
                <td>{{ r.ts | date:'dd/MM/yyyy HH:mm' }}</td>
                <td>{{ r.yhat | number:'1.2-2' }}</td>
                <td>{{ r.model }}</td>
                <td>{{ r.created_at | date:'dd/MM/yyyy HH:mm' }}</td>
            </tr>
            }
        </tbody>
    </table>
</div>
}